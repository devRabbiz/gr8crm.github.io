<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="Asciidoctor 0.1.4">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Create a web site using GR8 CRM plugins</title>
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }
audio, canvas, video { display: inline-block; }
audio:not([controls]) { display: none; height: 0; }
[hidden] { display: none; }
html { background: #fff; color: #000; font-family: sans-serif; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; }
body { margin: 0; }
a:focus { outline: thin dotted; }
a:active, a:hover { outline: 0; }
h1 { font-size: 2em; margin: 0.67em 0; }
abbr[title] { border-bottom: 1px dotted; }
b, strong { font-weight: bold; }
dfn { font-style: italic; }
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }
mark { background: #ff0; color: #000; }
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }
pre { white-space: pre-wrap; }
q { quotes: "\201C" "\201D" "\2018" "\2019"; }
small { font-size: 80%; }
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }
sup { top: -0.5em; }
sub { bottom: -0.25em; }
img { border: 0; }
svg:not(:root) { overflow: hidden; }
figure { margin: 0; }
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }
legend { border: 0; padding: 0; }
button, input, select, textarea { font-family: inherit; font-size: 100%; margin: 0; }
button, input { line-height: normal; }
button, select { text-transform: none; }
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; cursor: pointer; }
button[disabled], html input[disabled] { cursor: default; }
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; padding: 0; }
input[type="search"] { -webkit-appearance: textfield; -moz-box-sizing: content-box; -webkit-box-sizing: content-box; box-sizing: content-box; }
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }
textarea { overflow: auto; vertical-align: top; }
table { border-collapse: collapse; border-spacing: 0; }
*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }
html, body { font-size: 100%; }
body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }
a:hover { cursor: pointer; }
a:focus { outline: none; }
img, object, embed { max-width: 100%; height: auto; }
object, embed { height: 100%; }
img { -ms-interpolation-mode: bicubic; }
#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }
.left { float: left !important; }
.right { float: right !important; }
.text-left { text-align: left !important; }
.text-right { text-align: right !important; }
.text-center { text-align: center !important; }
.text-justify { text-align: justify !important; }
.hide { display: none; }
.antialiased, body { -webkit-font-smoothing: antialiased; }
img { display: inline-block; vertical-align: middle; }
textarea { height: auto; min-height: 50px; }
select { width: 100%; }
p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }
.subheader, #content #toctitle, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title, .tableblock > caption { line-height: 1.4; color: #7a2518; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }
a { color: #005498; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #00467f; }
a img { border: none; }
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Georgia, "URW Bookman L", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; color: #ba3925; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #e99b8f; line-height: 0; }
h1 { font-size: 2.125em; }
h2 { font-size: 1.6875em; }
h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }
h4 { font-size: 1.125em; }
h5 { font-size: 1.125em; }
h6 { font-size: 1em; }
hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }
em, i { font-style: italic; line-height: inherit; }
strong, b { font-weight: bold; line-height: inherit; }
small { font-size: 60%; line-height: inherit; }
code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; color: #6d180b; }
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }
ul, ol { margin-left: 1.5em; }
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }
abbr { text-transform: none; }
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: inherit; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }
blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; }
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }
.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }
@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
.print-only { display: none !important; }
@media print { * { background: transparent !important; color: #000 !important; box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.6; }
.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }
*:not(pre) > code { font-size: 0.9375em; padding: 1px 3px 0; white-space: nowrap; background-color: #f2f2f2; border: 1px solid #cccccc; -webkit-border-radius: 4px; border-radius: 4px; text-shadow: none; }
pre, pre > code { line-height: 1.4; color: inherit; font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; }
kbd.keyseq { color: #555555; }
kbd:not(.keyseq) { display: inline-block; color: #222222; font-size: 0.75em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }
kbd kbd:first-child { margin-left: 0; }
kbd kbd:last-child { margin-right: 0; }
.menuseq, .menu { color: #090909; }
p a > code:hover { color: #561309; }
#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }
#header { margin-bottom: 2.5em; }
#header > h1 { color: black; font-weight: normal; border-bottom: 1px solid #dddddd; margin-bottom: -28px; padding-bottom: 32px; }
#header span { color: #6f6f6f; }
#header #revnumber { text-transform: capitalize; }
#header br { display: none; }
#header br + span { padding-left: 3px; }
#header br + span:before { content: "\2013 \0020"; }
#header br + span.author { padding-left: 0; }
#header br + span.author:before { content: ", "; }
#toc { border-bottom: 3px double #ebebeb; padding-bottom: 1.25em; }
#toc > ul { margin-left: 0.25em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
#toc ul { list-style-type: none; }
#toctitle { color: #7a2518; }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; }
  #toc.toc2 { position: fixed; width: 20em; left: 0; top: 0; border-right: 1px solid #ebebeb; border-bottom: 0; z-index: 1000; padding: 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; }
  #toc.toc2 > ul { font-size: .95em; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1.25em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; }
  body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #ebebeb; left: auto; right: 0; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; border-width: 0; -webkit-border-radius: 4px; border-radius: 4px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }
#content #toc a { text-decoration: none; }
#content #toctitle { font-weight: bold; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-size: 1em; padding-left: 0.125em; }
#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }
#footer-text { color: #dddddd; line-height: 1.44; }
.sect1 { padding-bottom: 1.25em; }
.sect1 + .sect1 { border-top: 3px double #ebebeb; }
#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #ba3925; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #a53221; }
.imageblock, .literalblock, .listingblock, .verseblock, .videoblock { margin-bottom: 1.25em; }
.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-align: left; font-weight: bold; }
.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }
table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }
.admonitionblock > table { border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #6f6f6f; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }
.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 4px; border-radius: 4px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.625em; }
.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }
.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #d9d9d9; box-shadow: 0 1px 8px #d9d9d9; }
.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 4px; border-radius: 4px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.625em; }
.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }
.sidebarblock > .content > .title { color: #7a2518; margin-top: 0; line-height: 1.6; }
.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }
.literalblock > .content pre, .listingblock > .content pre { background: none; border-width: 1px 0; border-style: dotted; border-color: #bfbfbf; -webkit-border-radius: 4px; border-radius: 4px; padding: 0.75em 0.75em 0.5em 0.75em; word-wrap: break-word; }
.literalblock > .content pre.nowrap, .listingblock > .content pre.nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
.literalblock > .content pre > code, .listingblock > .content pre > code { display: block; }
@media only screen { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.8em; } }
@media only screen and (min-width: 768px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.9em; } }
@media only screen and (min-width: 1280px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 1em; } }
.listingblock > .content { position: relative; }
.listingblock:hover code[class*=" language-"]:before { text-transform: uppercase; font-size: 0.9em; color: #999; position: absolute; top: 0.375em; right: 0.375em; }
.listingblock:hover code.asciidoc:before { content: "asciidoc"; }
.listingblock:hover code.clojure:before { content: "clojure"; }
.listingblock:hover code.css:before { content: "css"; }
.listingblock:hover code.groovy:before { content: "groovy"; }
.listingblock:hover code.html:before { content: "html"; }
.listingblock:hover code.java:before { content: "java"; }
.listingblock:hover code.javascript:before { content: "javascript"; }
.listingblock:hover code.python:before { content: "python"; }
.listingblock:hover code.ruby:before { content: "ruby"; }
.listingblock:hover code.scss:before { content: "scss"; }
.listingblock:hover code.xml:before { content: "xml"; }
.listingblock:hover code.yaml:before { content: "yaml"; }
.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }
.listingblock.terminal pre .command:not([data-prompt]):before { content: '$'; }
table.pyhltable { border: 0; margin-bottom: 0; }
table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }
table.pyhltable td.code { padding-left: .75em; padding-right: 0; }
.highlight.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }
.highlight.pygments .lineno { display: inline-block; margin-right: .25em; }
table.pyhltable .linenodiv { background-color: transparent !important; padding-right: 0 !important; }
.quoteblock { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
.quoteblock blockquote { margin: 0 0 1.25em 0; padding: 0 0 0.5625em 0; border: 0; }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.5625em; font-size: inherit; color: #555555; }
.quoteblock .attribution br { display: none; }
.quoteblock .attribution cite { display: block; margin-bottom: 0.625em; }
table thead th, table tfoot th { font-weight: bold; }
table.tableblock.grid-all { border-collapse: separate; border-spacing: 1px; -webkit-border-radius: 4px; border-radius: 4px; border-top: 1px solid #dddddd; border-bottom: 1px solid #dddddd; }
table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }
table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }
table.tableblock td .paragraph:last-child p, table.tableblock td > p:last-child { margin-bottom: 0; }
th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }
th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }
th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }
th.tableblock.valign-top, td.tableblock.valign-top { vertical-align: top; }
th.tableblock.valign-bottom, td.tableblock.valign-bottom { vertical-align: bottom; }
th.tableblock.valign-middle, td.tableblock.valign-middle { vertical-align: middle; }
p.tableblock.header { color: #222222; font-weight: bold; }
td > div.verse { white-space: pre; }
ol { margin-left: 1.75em; }
ul li ol { margin-left: 1.5em; }
dl dd { margin-left: 1.125em; }
dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }
ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }
ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }
ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }
ul.checklist li > p:first-child > i[class^="icon-check"]:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }
ul.checklist li > p:first-child > input[type="checkbox"]:first-child { position: relative; top: 1px; }
ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }
.unstyled dl dt { font-weight: normal; font-style: normal; }
ol.arabic { list-style-type: decimal; }
ol.decimal { list-style-type: decimal-leading-zero; }
ol.loweralpha { list-style-type: lower-alpha; }
ol.upperalpha { list-style-type: upper-alpha; }
ol.lowerroman { list-style-type: lower-roman; }
ol.upperroman { list-style-type: upper-roman; }
ol.lowergreek { list-style-type: lower-greek; }
.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }
td.hdlist1 { padding-right: .8em; font-weight: bold; }
td.hdlist1, td.hdlist2 { vertical-align: top; }
.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }
.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }
.qanda > ol > li > p > em:only-child { color: #00467f; }
.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }
.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }
.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }
a.image { text-decoration: none; }
span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }
#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }
.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }
div.unbreakable { page-break-inside: avoid; }
.big { font-size: larger; }
.small { font-size: smaller; }
.underline { text-decoration: underline; }
.overline { text-decoration: overline; }
.line-through { text-decoration: line-through; }
.aqua { color: #00bfbf; }
.aqua-background { background-color: #00fafa; }
.black { color: black; }
.black-background { background-color: black; }
.blue { color: #0000bf; }
.blue-background { background-color: #0000fa; }
.fuchsia { color: #bf00bf; }
.fuchsia-background { background-color: #fa00fa; }
.gray { color: #606060; }
.gray-background { background-color: #7d7d7d; }
.green { color: #006000; }
.green-background { background-color: #007d00; }
.lime { color: #00bf00; }
.lime-background { background-color: #00fa00; }
.maroon { color: #600000; }
.maroon-background { background-color: #7d0000; }
.navy { color: #000060; }
.navy-background { background-color: #00007d; }
.olive { color: #606000; }
.olive-background { background-color: #7d7d00; }
.purple { color: #600060; }
.purple-background { background-color: #7d007d; }
.red { color: #bf0000; }
.red-background { background-color: #fa0000; }
.silver { color: #909090; }
.silver-background { background-color: #bcbcbc; }
.teal { color: #006060; }
.teal-background { background-color: #007d7d; }
.white { color: #bfbfbf; }
.white-background { background-color: #fafafa; }
.yellow { color: #bfbf00; }
.yellow-background { background-color: #fafa00; }
span.icon > [class^="icon-"], span.icon > [class*=" icon-"] { cursor: default; }
.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #005498; color: #003f72; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }
.conum { display: inline-block; color: white !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }
.literalblock > .content > pre, .listingblock > .content > pre { -webkit-border-radius: 0; border-radius: 0; }

</style>
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.min.css">
</head>
<body class="article">
<div id="header">
<h1>Create a web site using GR8 CRM plugins</h1>
<span id="author" class="author">Göran Ehrsson, Technipelago AB &lt;goran@technipelago.se&gt;</span><br>
<span id="revnumber">version 0.2,</span>
<span id="revdate">2014-08-03</span>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_gr8_crm">GR8 CRM</a></li>
<li><a href="#_prerequisites">Prerequisites</a></li>
<li><a href="#_create_a_new_grails_application">Create a new Grails application</a></li>
<li><a href="#_start_the_application">Start the application</a></li>
<li><a href="#_load_data">Load data</a></li>
<li><a href="#_twitter_bootstrap_design">Twitter Bootstrap design</a></li>
<li><a href="#_url_mapping_for_html_pages">URL mapping for HTML pages</a></li>
<li><a href="#_create_an_html_page">Create an HTML page</a></li>
<li><a href="#_web_layout">Web Layout</a></li>
<li><a href="#_custom_stylesheet">Custom stylesheet</a></li>
<li><a href="#_import_html_pages_from_files">Import HTML pages from files</a></li>
<li><a href="#_references">References</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide describes how you can use GR8 CRM Grails plugins to develop a simple web site with content authoring support.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_gr8_crm">GR8 CRM</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>GR8 CRM</strong> "Great Customer Relationship Management" is the name of a suite of plugins that help developers write customer relationship
oriented applications using the open source web application framework <strong>Grails</strong> by <strong>Pivotal Inc.</strong></p>
</div>
<div class="paragraph">
<p>The GR8 CRM "ecosystem" currently contains over 40 open source plugins for use with Grails. Most of them were developed as part of some kind of
enterprise application managing customers, projects, tasks, documents, etc.</p>
</div>
<div class="paragraph">
<p>Each plugin contains functionality that supports a specific problem domain. For example the <code>crm-task</code> plugin contains functionality
for scheduling tasks to be performed by people typically displayed in to-do lists or calendars.
The <code>crm-task</code> plugin focuses on that specific domain and does not contain features for managing customers, projects or any other non-task related features.</p>
</div>
<div class="paragraph">
<p>Each GR8 CRM plugin was developed with this separation-of-concern philosophy. This makes it easy to develop a Grails application
with just the functionality that is needed by assembling a set of GR8 CRM plugins covering they required features. No more, no less.
The time is takes to develop an application can be heavily reduced by the use of pre-defined standard plugins.</p>
</div>
<div class="paragraph">
<p>Two plugins stand out from the rest by being included in almost all enterprise applications no matter what business they
were developed to support, <code>crm-contact</code> contains features for managing contacts/companies/addresses
and <code>crm-content</code> contains features for content authoring and document storage.
Almost all enterprise applications manages customers and some kind of digital content.</p>
</div>
<div class="paragraph">
<p>However there is one type of application that manages content but not necessary customers and that is a simple web site.
The <code>crm-content</code> plugin can be used by web content authors to publish HTML pages on a web site.</p>
</div>
<div class="paragraph">
<p>This guide describes how you can use GR8 CRM Grails plugins to develop a simple web site.
The <code>crm-content</code> plugin makes it possible to add HTML pages in a content repository and make the pages publicly accessible.</p>
</div>
<div class="paragraph">
<p>The <code>crm-content</code> plugin is "web-front" plugin. Meaning it includes functionality to publish content on a web site.
It <strong>does not</strong> include functionality for content authoring. A companion plugin <code>crm-content-ui</code> adds authoring support
for content creators.</p>
</div>
<div class="paragraph">
<p>Lets start from scratch and create a Grails application that when deployed to a web server will serve as a simple web site.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisites">Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As of this writing the GR8 CRM plugins are not tested with Grails versions above 2.2.4, so please <strong>make sure you have Grails 2.2.4 installed</strong> and ready before you attempt to follow this guide.
Newer versions of Grails will be tested and adjustments will be done if needed to support newer versions, but because of lack of resources that work has not yet been done.
If you have the knowledge you are welcome to try with newer versions of Grails but I cannot guarantee it will work.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_a_new_grails_application">Create a new Grails application</h2>
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre>$ grails create-app mywebsite
$ cd mywebsite</pre>
</div>
</div>
<div class="paragraph">
<p>In this project we want (web) content management support so we need to add the crm-content-ui plugin in BuildConfig.groovy.
You must also add some other plugins needed at runtime.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>twitter-bootstrap</p>
</li>
<li>
<p>less-resources</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Your plugin section in <code>BuildConfig.groovy</code> should look like this:</p>
</div>
<div class="listingblock">
<div class="title">BuildConfig.groovy</div>
<div class="content">
<pre class="highlight"><code class="groovy language-groovy">plugins {
    build ":tomcat:$grailsVersion"
    runtime ":hibernate:$grailsVersion"

    compile ":jquery:1.10.2"
    compile ":resources:1.2.7"
    compile ":twitter-bootstrap:2.3.2"
    compile ":less-resources:1.3.3.2"

    compile ':cache:1.1.1'

    compile ":crm-security-shiro:2.0.0"
    compile ":crm-i18n:2.0.0"
    compile ":crm-content-ui:2.0.0"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We want our application to be a public web site, therefore we must add a few parameters to <code>Config.groovy</code> to support this.</p>
</div>
<div class="listingblock">
<div class="title">Config.groovy</div>
<div class="content">
<pre class="highlight"><code class="groovy language-groovy">crm.feature.crmContent.required = true <i class="conum" data-value="1"></i><b>(1)</b>
crm.security.controllers.public = ['crmFileAccess', 'crmPageNotFound'] <i class="conum" data-value="2"></i><b>(2)</b>
crm.content.cms.path = '/website/pages/' <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Enable the crm-content plugin for all users</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Controllers that should be excluded from authentication so they can be accessed by anyone</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Look for HTML pages in the <code>/website/pages</code> virtual folder.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_start_the_application">Start the application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now you should be ready to start the application!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="sh language-sh">$ grails run-app

| Server running. Browse to http://localhost:8080/mywebsite</code></pre>
</div>
</div>
<div class="paragraph">
<p>Point your browser to the application URL and you should see the familiar Grails start page.</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="images/default-start-page.png" alt="default start page">
</div>
<div class="title">Figure 1. Grails default start page</div>
</div>
<div class="paragraph">
<p>The list of installed plugins is long but that&#8217;s normal. It contains all transitive plugins pulled in by dependency resolution.</p>
</div>
<div class="paragraph">
<p>This was not very interesting. How do we publish content on the web site?</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_load_data">Load data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to publish content you must login as a valid application user.
To do this we must load the database with some metadata like users and permissions.
We must also create a folder structure to hold our web content.</p>
</div>
<div class="paragraph">
<p>Add this to <code>BootStrap.groovy</code>:</p>
</div>
<div class="listingblock">
<div class="title">BootStrap.groovy</div>
<div class="content">
<pre class="highlight"><code class="groovy language-groovy">class BootStrap {

    def navigationService
    def crmAccountService
    def crmSecurityService
    def crmContentService

    def init = { servletContext -&gt;

        navigationService.registerItem('main',
            [controller: 'crmFolder', action: 'list', title: 'crmContent.index.label', order: 20]) <i class="conum" data-value="1"></i><b>(1)</b>
        navigationService.updated()

        def admin = crmSecurityService.createUser([username: "admin", password: "admin",
            email: "firstname.lastname@email.com", name: "Site Admin", enabled: true]) <i class="conum" data-value="2"></i><b>(2)</b>

        crmSecurityService.addPermissionAlias("permission.all", ["*:*"])

        crmSecurityService.runAs(admin.username) {
            def account = crmAccountService.createAccount([status: "active"], [:]) <i class="conum" data-value="3"></i><b>(3)</b>
            def tenant = crmSecurityService.createTenant(account, "Website") <i class="conum" data-value="4"></i><b>(4)</b>
            crmSecurityService.runAs(admin.username, tenant.id) {
                crmSecurityService.addPermissionToUser("permission.all")

                def root = crmContentService.createFolder(null, "website", "Web site content", "", "") <i class="conum" data-value="5"></i><b>(5)</b>
                def images = crmContentService.createFolder(root, "images", "Web site images", "", "")
                def pages = crmContentService.createFolder(root, "pages", "Web pages", "", "")
            }
        }
    }</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Add a navigation item for content authoring to the main menu</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create the admin user</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Create an account to hold our tenants</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Create a tenant were we will store all information</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Create a folder structure to hold all our web content</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Multitenancy</strong> refers to a principle in software architecture where a single instance of the software runs on a server,
serving multiple client-organizations (tenants). Multitenancy contrasts with multi-instance architectures where separate
software instances (or hardware systems) operate on behalf of different client organizations.
With a multitenant architecture, a software application is designed to virtually partition its data and configuration,
and each client organization works with a customized virtual application. <a href="#Multitenancy">[Multitenancy]</a></p>
</div>
<div class="paragraph">
<p>All GR8 CRM plugins are required to support multitenancy. There are no automatic filtering going on behind the scenes by <code>Hibernate Filters</code> or similar.
All plugins must be developed with multitenancy in mind and filter every query on the domain&#8217;s <code>tenantId</code> property.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now restart the application and browse to <a href="http://localhost:8080/mywebsite">http://localhost:8080/mywebsite</a> again.</p>
</div>
<div class="paragraph">
<p>On the Grails start page click on <code>grails.plugins.crm.content.CrmFolderController</code> in the <strong>Available Controllers</strong> section.
You will now be forced to login using the username and password you specified in <code>BootStrap.groovy</code> (admin/admin).
It&#8217;s the <code>crm-security-shiro</code> plugin that kicks in and protects controller access using <strong>Apache Shiro</strong>.</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="images/login-dialog-grails.png" alt="login dialog grails">
</div>
<div class="title">Figure 2. Login Dialog</div>
</div>
<div class="paragraph">
<p>When successfully logged in you will see a page where you can search for files and folders.
Click the <code>Find</code> button and you will see a list of folders.</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="images/folder-list-grails.png" alt="folder list grails">
</div>
<div class="title">Figure 3. List of folders</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_twitter_bootstrap_design">Twitter Bootstrap design</h2>
<div class="sectionbody">
<div class="paragraph">
<p>However there is something wrong with the user interface and design. The user interface cannot be meant to be this ugly?!</p>
</div>
<div class="paragraph">
<p>No the user interface can be better looking. We have to add some twitter bootstrap configuration to <code>ApplicationResources.groovy</code>
and remove the layout that was copied to <strong>grails-app/views/layouts</strong> folder by <code>grails create-app</code>.</p>
</div>
<div class="paragraph">
<p>Edit <code>grails-app/conf/ApplicationResources.groovy</code> and make it look like this:</p>
</div>
<div class="listingblock">
<div class="title">ApplicationResources.groovy</div>
<div class="content">
<pre class="highlight"><code class="groovy language-groovy">modules = {
    'bootstrap-responsive-less' {
        dependsOn 'bootstrap'
        resource id:'bootstrap-responsive-less', url:[plugin: 'twitter-bootstrap', dir: 'less', file: 'responsive.less'], attrs:[rel: "stylesheet/less", type:'css', order:150], disposition: 'head'
    }
    application {
        dependsOn 'bootstrap-responsive-less'
        resource url:[plugin: 'twitter-bootstrap', dir: 'less', file: 'bootstrap.less'], attrs:[rel: "stylesheet/less", type:'css', order:10], disposition: 'head'
        resource url:'js/application.js'
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Remove the default layout.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>rm grails-app/views/layouts.main.gsp</pre>
</div>
</div>
<div class="paragraph">
<p>Now refresh the browser and you should see a design based on Twitter Bootstrap.</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="images/folder-list-bootstrap.png" alt="folder list bootstrap">
</div>
<div class="title">Figure 4. List of folders with Twitter Bootstrap design</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_url_mapping_for_html_pages">URL mapping for HTML pages</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The crm-content plugin supports publishing HTML documents to a web site but this functionality is not enabled by default.
To enable <strong>website mode</strong> we must add one line in <code>grails-app/conf/UrlMappings.groovy</code></p>
</div>
<div class="listingblock">
<div class="title">UrlMappings.groovy</div>
<div class="content">
<pre class="highlight"><code class="groovy language-groovy">"404"(controller: "crmPageNotFound", action: "index")</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above configuration routes 404 (page not found) errors to a special Grails controller that looks up and renders HTML pages.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_an_html_page">Create an HTML page</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now click on the folder <strong>Web pages</strong> to move into this folder, then click the <code>New HTML file</code> button.</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="images/add-html-file.png" alt="add html file">
</div>
<div class="title">Figure 5. New HTML file</div>
</div>
<div class="paragraph">
<p>A <strong>Rich Text Editor</strong> is opened where you can create you web page without the need to know HTML.</p>
</div>
<div class="paragraph">
<p>Write some meaningful text and save the page as <strong>index.html</strong>.</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="images/html-editor.png" alt="html editor">
</div>
<div class="title">Figure 6. Rich Text Editor</div>
</div>
<div class="paragraph">
<p>Now you are ready to access <strong>your first web page</strong>!</p>
</div>
<div class="paragraph">
<p>Type the application URL followed by <code>index.html</code> into your browser address bar and your carefully crafted page should appear.</p>
</div>
<div class="paragraph">
<p><a href="http://localhost:8080/mywebsite/index.html">http://localhost:8080/mywebsite/index.html</a></p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="images/first-page.png" alt="first page">
</div>
<div class="title">Figure 7. Our first page</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_web_layout">Web Layout</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Where does the header come from? The Grails logo and the horizontal menu?
In a previous step we removed the layout <code>grails-app/views/layouts.main.gsp</code>, so where does it pickup the Twitter Bootstrap layout?</p>
</div>
<div class="paragraph">
<p>The user interface plugin <code>crm-ui-bootstrap</code> contains a layout called <code>main.gsp</code>. That&#8217;s what you see in your browser.
This layout is specifically made to support the <em>back-office</em> user role, like content creators and administrators.
It&#8217;s not made for public facing web sites. So we must create a new layout for our web content.</p>
</div>
<div class="paragraph">
<p>Create a file called <code>grails-app/views/layouts/web.gsp</code> and add the following markup:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="html language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="en" class="no-js"&gt;
&lt;head&gt;
    &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/&gt;
    &lt;title&gt;&lt;g:layoutTitle default="My GR8 Web"/&gt;&lt;/title&gt;
    &lt;r:require modules="application, crm"/&gt;
    &lt;r:layoutResources/&gt;
    &lt;g:layoutHead/&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container"&gt;
        &lt;g:layoutBody/&gt;
    &lt;/div&gt;
    &lt;r:layoutResources/&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>We must tell the <code>crm-content</code> plugin to use this new layout for web content.
Edit <code>Config.groovy</code> and change <code>crm.content.cms.layout</code> to <code>web</code>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>crm.content.cms.layout = 'web'</pre>
</div>
</div>
<div class="paragraph">
<p>We have to restart the application for changes to take effect, but that will destroy our manually crafted web page <strong>index.html</strong>.
To avoid repeated manual work we can add code to <code>BootStrap.groovy</code> to programatically create <strong>index.html</strong> when the application starts.
Add this code <strong>after</strong> the code that creates the folder <code>pages</code> in BootStrap.groovy.</p>
</div>
<div class="listingblock">
<div class="title">BootStrap.groovy</div>
<div class="content">
<pre class="highlight"><code class="groovy language-groovy">crmContentService.createResource("""
&lt;h1&gt;Welcome!&lt;/h1&gt;
&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit.&lt;/p&gt;
""", "index.html", pages)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now refresh the browser and you should see the contents of index.html without any layout around it.</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="images/empty-layout.png" alt="empty layout">
</div>
<div class="title">Figure 8. Blank Layout</div>
</div>
<div class="paragraph">
<p>There is one annoying problem left. If you access the application URL <a href="http://localhost:8080/mywebsite">http://localhost:8080/mywebsite</a> (without index.html) you&#8217;ll get the default Grails welcome page.
We want <strong>index.html</strong> to be displayed when users navigate to the default URL. This can be done by changing a line in <code>grails-app/conf/UrlMappings.groovy</code>.
The "/" URI is by default mapped to the <strong>index</strong> view. This will display <code>grails-app/views/index.gsp</code> in the browser.
If we add a <strong>.html</strong> extension to the view it will show our <strong>index.html</strong> page instead.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>"/"(view:"/index.html")</pre>
</div>
</div>
<div class="paragraph">
<p>Point your browser to <a href="http://localhost:8080/mywebsite">http://localhost:8080/mywebsite</a> and it should display our <strong>index.html</strong> page.
The default Grails <strong>index.gsp</strong> will not be accessible anymore because it&#8217;s "hidden" by the URL mapping.
If you want a clean project you can delete <code>grails-app/views/index.gsp</code> now.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_custom_stylesheet">Custom stylesheet</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Up until now our layout has been using the default stylesheets from the <code>twitter-bootstrap</code> Grails plugin, but we want to put
a little personal style to our website by changing some colors and styles. To do this we must copy the default styles and modify them.</p>
</div>
<div class="paragraph">
<p>Create a folder under your application&#8217;s web-app folder called <code>less</code>. Then locate the <code>twitter-bootstrap</code> plugin that your application uses.
If you use IntelliJ IDEA you can access it in the Project Explorer under the Plugins/twitter-bootstrap-2.3.2 folder.
If you&#8217;re not using IntelliJ you can find the plugins in $HOME/.grails/&#8230;/plugins.
Another option is to copy the file from it&#8217;s source <a href="https://github.com/twbs/bootstrap/blob/v2.3.2/less/variables.less">https://github.com/twbs/bootstrap/blob/v2.3.2/less/variables.less</a></p>
</div>
<div class="paragraph">
<p>Copy the file <code>variables.less</code> from the twitter-bootstrap distribution and put it in the less folder under your application&#8217;s <code>web-app</code> folder.
Then create an empty file under your application&#8217;s <code>web-app/less</code> folder called <code>application.less</code> with this content:</p>
</div>
<div class="listingblock">
<div class="title">application.less</div>
<div class="content">
<pre class="highlight"><code class="css language-css">@import "responsive.less";

// Add your CSS changes and additions here...
h1 {
  color: @green;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should now have two files in your application&#8217;s web-app/less folder:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>application.less
variables.less</pre>
</div>
</div>
<div class="paragraph">
<p>To make the application use our custom styles we must edit <code>grails-app/conf/ApplicationResources.groovy</code> and change the
<code>application</code> module. We must remove the <code>plugin</code> key and change <code>file</code> value from <code>bootstrap.less</code> to <code>application.less</code>.</p>
</div>
<div class="listingblock">
<div class="title">ApplicationResources.groovy</div>
<div class="content">
<pre class="highlight"><code class="groovy language-groovy">application {
    dependsOn 'bootstrap-responsive-less'
    resource url:[dir: 'less', file: 'application.less'], attrs:[rel: "stylesheet/less", type:'css', order:10], disposition: 'head'
    resource url:'js/application.js'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Restart the application and refresh the start page, the header text (h1) should now be green.</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="images/custom-style.png" alt="custom style">
</div>
<div class="title">Figure 9. Custom Stylesheet</div>
</div>
<div class="paragraph">
<p>You can add your custom styles and override existing styles in <code>application.less</code>.
You can refer to <a href="#LESS">[LESS]</a> variables located in <code>variables.less</code> like <code>@blue</code>, <code>@linkColor</code> and <code>@navbarHeight</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_import_html_pages_from_files">Import HTML pages from files</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <strong>index.html</strong> file was added programatically in BootStrap.groovy. That&#8217;s easy for testing and to get a page up and running quickly.
But adding HTML pages as Groovy code is not the smartest thing to do. There is another option built into the <code>crm-content</code> plugin.
We can have it import HTML files (or any other content) from the file system when the application starts.</p>
</div>
<div class="paragraph">
<p>Edit BootStrap.groovy and add the <code>crmContentImportService</code> bean.</p>
</div>
<div class="listingblock">
<div class="title">BootStrap.groovy</div>
<div class="content">
<pre class="highlight"><code class="groovy language-groovy">class BootStrap {
    ...
    def crmContentImportService
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then remove the statement <strong>crmContentService.createResource(&#8230;)</strong> and replace it with this line:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>crmContentImportService.importFiles("templates/crm", "admin")</pre>
</div>
</div>
<div class="paragraph">
<p>This will import all files under <code>src/templates/crm</code> as web resources.
Under this folder your can put HTML pages, images, PDF:s or any other file type you want to use on your web site.</p>
</div>
<div class="paragraph">
<p>Create two new folders under <code>src/templates/crm/website</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>images
pages</pre>
</div>
</div>
<div class="paragraph">
<p>Then put a file called <code>index.html</code> in the <code>&#8230;/website/pages</code> folder with the same content as before:</p>
</div>
<div class="listingblock">
<div class="title">index.html</div>
<div class="content">
<pre class="highlight"><code class="html language-html">&lt;h1&gt;Welcome!&lt;/h1&gt;
&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit.&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This file will now be imported when the application starts. The end result is exactly the same as with the createResource(&#8230;)
code that we had before in BootStrap.groovy.</p>
</div>
<div class="paragraph">
<p>You can add all your HTML pages in <code>pages</code> and images in <code>images</code>. You refer to images with the following path:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;img src="/mywebsite/r/1/website/images/imagename.png/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>r</code> prefix is for <strong>resources</strong> and number <code>1</code> is the <strong>ID</strong> of our tenant where we store all data.</p>
</div>
<hr>
<div class="paragraph">
<p>This concludes our first part of this guide. We now have a Grails application that can serve as a pubic facing web site.
It has built-in content editing features, including image uploads. You can add HTML pages and images in src/templates/crm/website
that will be imported when the application starts. Or you can configure a persistent database in DataSource.groovy and start
creating pages manually in the rich text editor.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references">References</h2>
<div class="sectionbody">
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="Multitenancy"></a>[Multitenancy] <a href="http://en.wikipedia.org/wiki/Multitenancy">http://en.wikipedia.org/wiki/Multitenancy</a></p>
</li>
<li>
<p><a id="LESS"></a>[LESS] <a href="http://en.wikipedia.org/wiki/LESS_(stylesheet_language)#Variables">http://en.wikipedia.org/wiki/LESS_(stylesheet_language)#Variables</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.2<br>
Last updated 2014-08-02 23:40:40 CEST
</div>
</div>
</body>
</html>